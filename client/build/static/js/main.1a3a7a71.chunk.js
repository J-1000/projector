(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{37:function(t,e,n){},38:function(t,e,n){},66:function(t,e,n){"use strict";n.r(e);var s=n(1),a=n.n(s),r=n(30),c=n.n(r),i=(n(37),n(15)),o=n(4),l=n(5),u=n(7),h=n(6),j=(n(38),n(2)),p=n(8),d=n.n(p),b=n(12),O=n(0);function m(t){return Object(O.jsx)("div",{children:t.projects.map((function(t){return Object(O.jsx)("h3",{children:Object(O.jsx)(b.b,{to:"/projects/".concat(t._id),children:t.title})},t._id)}))})}var g=n(14),f=function(t){Object(u.a)(n,t);var e=Object(h.a)(n);function n(){var t;Object(o.a)(this,n);for(var s=arguments.length,a=new Array(s),r=0;r<s;r++)a[r]=arguments[r];return(t=e.call.apply(e,[this].concat(a))).state={title:"",description:""},t.handleSubmit=function(e){e.preventDefault();var n=t.state,s=n.title,a=n.description;d.a.post("/api/projects",{title:s,description:a}).then((function(e){console.log(e.data),t.setState({title:"",description:""}),t.props.getData()}))},t.handleChange=function(e){var n=e.target,s=n.name,a=n.value;t.setState(Object(g.a)({},s,a))},t}return Object(l.a)(n,[{key:"render",value:function(){return Object(O.jsxs)("form",{onSubmit:this.handleSubmit,children:[Object(O.jsx)("label",{htmlFor:"title",children:"Title: "}),Object(O.jsx)("input",{type:"text",name:"title",id:"title",value:this.state.title,onChange:this.handleChange}),Object(O.jsx)("label",{htmlFor:"title",children:"Description: "}),Object(O.jsx)("input",{type:"text",name:"description",id:"description",value:this.state.description,onChange:this.handleChange}),Object(O.jsx)("button",{type:"submit",children:"Create this project"})]})}}]),n}(s.Component),x=function(t){Object(u.a)(n,t);var e=Object(h.a)(n);function n(){var t;Object(o.a)(this,n);for(var s=arguments.length,a=new Array(s),r=0;r<s;r++)a[r]=arguments[r];return(t=e.call.apply(e,[this].concat(a))).state={projects:[]},t.getData=function(){d.a.get("/api/projects").then((function(e){console.log(e),t.setState({projects:e.data})})).catch((function(t){return console.log(t)}))},t}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.getData()}},{key:"render",value:function(){return Object(O.jsxs)("div",{children:[Object(O.jsx)(f,{getData:this.getData}),Object(O.jsx)(m,{projects:this.state.projects})]})}}]),n}(s.Component),v=function(t,e){return d.a.post("/api/auth/signup",{username:t,password:e}).then((function(t){return t.data})).catch((function(t){return t}))},y=function(t,e){return d.a.post("/api/auth/login",{username:t,password:e}).then((function(t){return t.data})).catch((function(t){return t}))},C=function(t){Object(u.a)(n,t);var e=Object(h.a)(n);function n(){var t;Object(o.a)(this,n);for(var s=arguments.length,a=new Array(s),r=0;r<s;r++)a[r]=arguments[r];return(t=e.call.apply(e,[this].concat(a))).state={username:"",password:"",message:""},t.handleChange=function(e){var n=e.target,s=n.name,a=n.value;t.setState(Object(g.a)({},s,a))},t.handleSubmit=function(e){e.preventDefault();var n=t.state,s=n.username,a=n.password;v(s,a).then((function(e){e.message?t.setState({message:e.message,username:"",password:""}):(console.log(e),t.props.setUser(e),t.props.history.push("/projects"))}))},t}return Object(l.a)(n,[{key:"render",value:function(){return Object(O.jsxs)("div",{children:[Object(O.jsx)("h2",{children:"Signup"}),Object(O.jsxs)("form",{onSubmit:this.handleSubmit,children:[Object(O.jsx)("label",{htmlFor:"username",children:"Username: "}),Object(O.jsx)("input",{id:"username",type:"text",name:"username",value:this.state.username,onChange:this.handleChange}),Object(O.jsx)("label",{htmlFor:"password",children:"Password: "}),Object(O.jsx)("input",{id:"password",type:"password",name:"password",value:this.state.password,onChange:this.handleChange}),Object(O.jsx)("button",{type:"submit",children:"Sign Up"}),this.state.message&&Object(O.jsx)("h3",{children:this.state.message})]})]})}}]),n}(s.Component),S=function(t){Object(u.a)(n,t);var e=Object(h.a)(n);function n(){var t;Object(o.a)(this,n);for(var s=arguments.length,a=new Array(s),r=0;r<s;r++)a[r]=arguments[r];return(t=e.call.apply(e,[this].concat(a))).state={username:"",password:"",message:""},t.handleChange=function(e){var n=e.target,s=n.name,a=n.value;t.setState(Object(g.a)({},s,a))},t.handleSubmit=function(e){e.preventDefault();var n=t.state,s=n.username,a=n.password;y(s,a).then((function(e){e.message?t.setState({message:e.message,username:"",password:""}):(console.log(e),t.props.setUser(e),t.props.history.push("/projects"))}))},t}return Object(l.a)(n,[{key:"render",value:function(){return Object(O.jsxs)("div",{children:[Object(O.jsx)("h2",{children:"Login"}),Object(O.jsxs)("form",{onSubmit:this.handleSubmit,children:[Object(O.jsx)("label",{htmlFor:"username",children:"Username: "}),Object(O.jsx)("input",{id:"username",type:"text",name:"username",value:this.state.username,onChange:this.handleChange}),Object(O.jsx)("label",{htmlFor:"password",children:"Password: "}),Object(O.jsx)("input",{id:"password",type:"password",name:"password",value:this.state.password,onChange:this.handleChange}),Object(O.jsx)("button",{type:"submit",children:"Log in"}),this.state.message&&Object(O.jsx)("h3",{children:this.state.message})]})]})}}]),n}(s.Component),w=function(t){Object(u.a)(n,t);var e=Object(h.a)(n);function n(){return Object(o.a)(this,n),e.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(O.jsxs)("div",{children:[Object(O.jsx)("h1",{children:"Edit this Project"}),Object(O.jsxs)("form",{onSubmit:this.props.handleSubmit,children:[Object(O.jsx)("label",{htmlFor:"title",children:"Title: "}),Object(O.jsx)("input",{type:"text",id:"title",name:"title",value:this.props.title,onChange:this.props.handleChange}),Object(O.jsx)("label",{htmlFor:"description",children:"Description: "}),Object(O.jsx)("input",{type:"text",id:"description",name:"description",value:this.props.description,onChange:this.props.handleChange}),Object(O.jsx)("button",{type:"submit",children:"Update this Project"})]})]})}}]),n}(s.Component),F=function(t){Object(u.a)(n,t);var e=Object(h.a)(n);function n(){var t;Object(o.a)(this,n);for(var s=arguments.length,a=new Array(s),r=0;r<s;r++)a[r]=arguments[r];return(t=e.call.apply(e,[this].concat(a))).state={project:null,title:"",description:"",error:null,editForm:!1},t.toggleEditForm=function(){t.setState((function(t){return{editForm:!t.editForm}}))},t.getData=function(){d.a.get("/api/projects/".concat(t.props.match.params.id)).then((function(e){console.log(e.data),t.setState({project:e.data,title:e.data.title,description:e.data.description})})).catch((function(e){console.log(e),404===e.response.status&&t.setState({error:"Not found \ud83e\udd37\u200d\u2640\ufe0f\ud83e\udd37\u200d\u2642\ufe0f"})}))},t.deleteProject=function(){d.a.delete("/api/projects/".concat(t.state.project._id)).then((function(){t.props.history.push("/projects")})).catch((function(t){console.log(t)}))},t.handleChange=function(e){var n=e.target,s=n.name,a=n.value;t.setState(Object(g.a)({},s,a))},t.handleSubmit=function(e){var n=t.state,s=n.title,a=n.description;e.preventDefault(),d.a.put("/api/projects/".concat(t.state.project._id),{title:s,description:a}).then((function(e){t.setState({project:e.data,title:e.data.title,description:e.data.description,editForm:!1})})).catch((function(t){return console.log(t)}))},t}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.getData()}},{key:"render",value:function(){return this.state.error?Object(O.jsx)("h2",{children:this.state.error}):this.state.project?Object(O.jsxs)(O.Fragment,{children:[Object(O.jsxs)("h1",{children:["Title: ",this.state.project.title]}),Object(O.jsxs)("p",{children:["Description: ",this.state.project.description]}),Object(O.jsx)("button",{onClick:this.deleteProject,children:"Delete this Project \u274c"}),Object(O.jsx)("button",{onClick:this.toggleEditForm,children:"Show Edit Form \ud83d\udcdd"}),this.state.editForm&&Object(O.jsx)(w,Object(i.a)(Object(i.a)({},this.state),{},{handleChange:this.handleChange,handleSubmit:this.handleSubmit}))]}):Object(O.jsx)(O.Fragment,{})}}]),n}(s.Component),D=n(32),k=["component","user","path","redirectPath"],U=function(t){var e=t.component,n=t.user,s=t.path,a=t.redirectPath,r=void 0===a?"/":a,c=Object(D.a)(t,k);return Object(O.jsx)(j.b,{exact:!0,path:s,render:function(t){return n?Object(O.jsx)(e,Object(i.a)(Object(i.a)(Object(i.a)({},t),c),{},{user:n})):Object(O.jsx)(j.a,{to:r})}})};function P(t){var e=function(){d.a.delete("/api/auth/logout").then((function(t){return t.data})).catch((function(t){return t.response.data})).then((function(){t.setUser(null)}))};return Object(O.jsxs)("ul",{children:[Object(O.jsx)("li",{children:Object(O.jsx)(b.b,{to:"/",children:"Home"})}),t.user?Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("li",{children:Object(O.jsx)(b.b,{to:"/projects",children:"Projects"})}),Object(O.jsx)("li",{children:Object(O.jsx)(b.b,{to:"/",onClick:function(){return e()},children:"Logout"})})]}):Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("li",{children:Object(O.jsx)(b.b,{to:"/signup",children:"Signup"})}),Object(O.jsx)("li",{children:Object(O.jsx)(b.b,{to:"/login",children:"Login"})})]})]})}var A=function(t){Object(u.a)(n,t);var e=Object(h.a)(n);function n(){var t;Object(o.a)(this,n);for(var s=arguments.length,a=new Array(s),r=0;r<s;r++)a[r]=arguments[r];return(t=e.call.apply(e,[this].concat(a))).state={user:t.props.user},t.setUser=function(e){t.setState({user:e})},t}return Object(l.a)(n,[{key:"render",value:function(){var t=this;return Object(O.jsxs)("div",{className:"App",children:[Object(O.jsx)(P,{user:this.state.user,setUser:this.setUser}),Object(O.jsx)(U,{path:"/projects",user:this.state.user,component:x,redirectPath:"/login"}),Object(O.jsx)(j.b,{exact:!0,path:"/projects/:id",component:F}),Object(O.jsx)(j.b,{exact:!0,path:"/signup",render:function(e){return Object(O.jsx)(C,Object(i.a)({setUser:t.setUser},e))}}),Object(O.jsx)(j.b,{exact:!0,path:"/login",render:function(e){return Object(O.jsx)(S,Object(i.a)({setUser:t.setUser},e))}})]})}}]),n}(a.a.Component),L=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,67)).then((function(e){var n=e.getCLS,s=e.getFID,a=e.getFCP,r=e.getLCP,c=e.getTTFB;n(t),s(t),a(t),r(t),c(t)}))};d.a.get("/api/auth/loggedin").then((function(t){var e=t.data;console.log("user in index.js: ",e),c.a.render(Object(O.jsx)(b.a,{children:Object(O.jsx)(A,{user:e})}),document.getElementById("root"))})).catch((function(t){console.log(t)})),L()}},[[66,1,2]]]);
//# sourceMappingURL=main.1a3a7a71.chunk.js.map